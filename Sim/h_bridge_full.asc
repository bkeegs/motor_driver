Version 4
SHEET 1 2596 804
WIRE -128 -304 -128 -336
WIRE 1104 -304 1104 -336
WIRE -192 -208 -272 -208
WIRE -128 -208 -128 -240
WIRE -128 -208 -192 -208
WIRE -96 -208 -128 -208
WIRE -32 -208 -96 -208
WIRE 96 -208 32 -208
WIRE 944 -208 880 -208
WIRE 1072 -208 1008 -208
WIRE 1104 -208 1104 -240
WIRE 1104 -208 1072 -208
WIRE 1184 -208 1104 -208
WIRE 1248 -208 1184 -208
WIRE -272 -160 -272 -208
WIRE -96 -160 -96 -208
WIRE 1072 -160 1072 -208
WIRE 1248 -160 1248 -208
WIRE -416 -144 -416 -176
WIRE -144 -144 -160 -144
WIRE -96 -144 -96 -160
WIRE 1072 -144 1072 -160
WIRE 1136 -144 1120 -144
WIRE 192 -128 192 -144
WIRE 336 -128 192 -128
WIRE 784 -128 784 -144
WIRE 784 -128 640 -128
WIRE 192 -112 192 -128
WIRE 784 -112 784 -128
WIRE 192 -96 192 -112
WIRE 336 -96 336 -128
WIRE 640 -96 640 -128
WIRE 784 -96 784 -112
WIRE -416 -32 -416 -64
WIRE -272 -32 -272 -80
WIRE -240 -32 -272 -32
WIRE -160 -32 -160 -144
WIRE -96 -32 -96 -64
WIRE -48 -32 -96 -32
WIRE 64 -32 32 -32
WIRE 144 -32 64 -32
WIRE 912 -32 832 -32
WIRE 944 -32 912 -32
WIRE 1072 -32 1072 -64
WIRE 1072 -32 1024 -32
WIRE 1136 -32 1136 -144
WIRE 1248 -32 1248 -80
WIRE 1248 -32 1216 -32
WIRE -272 0 -272 -32
WIRE -96 0 -96 -32
WIRE 96 0 96 -208
WIRE 96 0 80 0
WIRE 192 0 192 -16
WIRE 192 0 96 0
WIRE 784 0 784 -16
WIRE 880 0 880 -208
WIRE 880 0 784 0
WIRE 896 0 880 0
WIRE 1072 0 1072 -32
WIRE 1248 0 1248 -32
WIRE 192 16 192 0
WIRE 336 16 336 -32
WIRE 336 16 192 16
WIRE 640 16 640 -32
WIRE 784 16 784 0
WIRE 784 16 640 16
WIRE -416 80 -432 80
WIRE -320 80 -336 80
WIRE -160 80 -160 -32
WIRE -144 80 -160 80
WIRE 1136 80 1136 -32
WIRE 1136 80 1120 80
WIRE 1312 80 1296 80
WIRE 1408 80 1392 80
WIRE -432 96 -432 80
WIRE 1408 96 1408 80
WIRE -96 128 -96 96
WIRE 80 128 80 0
WIRE 80 128 -96 128
WIRE 896 128 896 0
WIRE 1072 128 1072 96
WIRE 1072 128 896 128
WIRE -432 208 -432 176
WIRE -272 208 -272 96
WIRE 1248 208 1248 96
WIRE 1408 208 1408 176
WIRE 192 224 192 16
WIRE 256 224 192 224
WIRE 352 224 256 224
WIRE 512 224 432 224
WIRE 720 224 592 224
WIRE 784 224 784 16
WIRE 784 224 720 224
WIRE -272 416 -272 368
WIRE -96 416 -96 384
WIRE 1072 416 1072 384
WIRE 1248 416 1248 368
WIRE -144 432 -160 432
WIRE -96 432 -96 416
WIRE 192 432 192 224
WIRE 336 432 192 432
WIRE 784 432 784 224
WIRE 784 432 640 432
WIRE 1072 432 1072 416
WIRE 1136 432 1120 432
WIRE 192 464 192 432
WIRE 784 464 784 432
WIRE 336 480 336 432
WIRE 640 480 640 432
WIRE -272 544 -272 496
WIRE -240 544 -272 544
WIRE -160 544 -160 432
WIRE -96 544 -96 512
WIRE -48 544 -96 544
WIRE 64 544 32 544
WIRE 96 544 64 544
WIRE 144 544 96 544
WIRE 880 544 832 544
WIRE 912 544 880 544
WIRE 944 544 912 544
WIRE 1072 544 1072 512
WIRE 1072 544 1024 544
WIRE 1136 544 1136 432
WIRE 1248 544 1248 496
WIRE 1248 544 1216 544
WIRE 96 560 96 544
WIRE 880 560 880 544
WIRE -272 576 -272 544
WIRE -96 576 -96 544
WIRE 1072 576 1072 544
WIRE 1248 576 1248 544
WIRE 192 608 192 560
WIRE 336 608 336 544
WIRE 336 608 192 608
WIRE 640 608 640 544
WIRE 784 608 784 560
WIRE 784 608 640 608
WIRE -416 656 -432 656
WIRE -320 656 -336 656
WIRE -160 656 -160 544
WIRE -144 656 -160 656
WIRE 1136 656 1136 544
WIRE 1136 656 1120 656
WIRE 1312 656 1296 656
WIRE 1408 656 1392 656
WIRE -432 672 -432 656
WIRE 1408 672 1408 656
WIRE -96 704 -96 672
WIRE 96 704 96 640
WIRE 880 704 880 640
WIRE 1072 704 1072 672
WIRE -432 784 -432 752
WIRE -272 784 -272 672
WIRE 192 784 192 608
WIRE 784 784 784 608
WIRE 1248 784 1248 672
WIRE 1408 784 1408 752
FLAG -432 208 0
FLAG -272 208 0
FLAG 192 -144 VBAT
FLAG 64 -32 GATE_DRIVE_HS1
FLAG -416 -176 VBAT
FLAG -416 -32 0
FLAG -128 -336 VBAT
FLAG 96 704 0
FLAG -96 704 0
FLAG -96 384 VBAT
FLAG -432 784 0
FLAG -272 784 0
FLAG -272 368 VBAT
FLAG 64 544 GATE_DRIVE_LS1
FLAG 192 784 0
FLAG 256 224 HB_1
FLAG 1408 208 0
FLAG 1248 208 0
FLAG 784 -144 VBAT
FLAG 912 -32 GATE_DRIVE_HS2
FLAG 1104 -336 VBAT
FLAG 880 704 0
FLAG 1072 704 0
FLAG 1072 384 VBAT
FLAG 1408 784 0
FLAG 1248 784 0
FLAG 1248 368 VBAT
FLAG 912 544 GATE_DRIVE_LS2
FLAG 784 784 0
FLAG 720 224 HB_2
FLAG -192 -208 Cap1
FLAG 1184 -208 Cap2
SYMBOL res 48 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value .1m
SYMBOL nmos -144 0 R0
SYMATTR InstName M1
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res -144 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL nmos -320 0 R0
SYMATTR InstName M2
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res -288 -176 R0
SYMATTR InstName R3
SYMATTR Value 5k
SYMBOL res -320 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 5k
SYMBOL voltage -416 -160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vbat_on}
SYMBOL pmos -144 -64 M180
SYMATTR InstName M3
SYMATTR Value FDV304P
SYMATTR Prefix X
SYMBOL nmos 144 -112 R0
SYMATTR InstName M4
SYMATTR Value STB16NF06LT4
SYMATTR Prefix X
SYMBOL diode 352 -32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode -144 -304 R0
SYMATTR InstName D2
SYMBOL cap 32 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cboot}
SYMBOL res 48 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value .1m
SYMBOL nmos -144 576 R0
SYMATTR InstName M5
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res -144 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1m
SYMBOL nmos -320 576 R0
SYMATTR InstName M6
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res -288 400 R0
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL diode 352 544 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL res -320 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL nmos 144 464 R0
SYMATTR InstName M7
SYMATTR Value STB16NF06LT4
SYMATTR Prefix X
SYMBOL pmos -144 512 M180
SYMATTR InstName M8
SYMATTR Value FDV304P
SYMATTR Prefix X
SYMBOL res 928 -48 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value .1m
SYMBOL nmos 1120 0 M0
SYMATTR InstName M9
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res 1120 -48 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL nmos 1296 0 M0
SYMATTR InstName M10
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL voltage 1408 80 M0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=.5
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 {Tdelay2} 1n 1n {Ton} {Tp} {num_cyc})
SYMBOL res 1264 -176 M0
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL res 1296 64 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 5k
SYMBOL pmos 1120 -64 R180
SYMATTR InstName M11
SYMATTR Value FDV304P
SYMATTR Prefix X
SYMBOL nmos 832 -112 M0
SYMATTR InstName M12
SYMATTR Value STB16NF06LT4
SYMATTR Prefix X
SYMBOL diode 624 -32 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL diode 1120 -304 M0
SYMATTR InstName D5
SYMBOL cap 944 -224 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {Cboot}
SYMBOL res 928 528 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value .1m
SYMBOL res 864 656 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value {Rpd}
SYMBOL nmos 1120 576 M0
SYMATTR InstName M13
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res 1120 528 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1m
SYMBOL nmos 1296 576 M0
SYMATTR InstName M14
SYMATTR Value 2N7002P
SYMATTR Prefix X
SYMBOL res 1264 400 M0
SYMATTR InstName R17
SYMATTR Value 5k
SYMBOL diode 624 544 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL res 1296 640 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 5k
SYMBOL nmos 832 464 M0
SYMATTR InstName M15
SYMATTR Value STB16NF06LT4
SYMATTR Prefix X
SYMBOL pmos 1120 512 R180
SYMATTR InstName M16
SYMATTR Value FDV304P
SYMATTR Prefix X
SYMBOL res 448 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 0.5
SYMBOL ind 496 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1µ
SYMBOL res 80 656 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {Rpd}
SYMBOL voltage -432 656 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=.5
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 {Tdelay2} 1n 1n {Ton} {Tp} {num_cyc})
SYMBOL voltage -432 80 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=.5
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 {Tdelay1} 1n 1n {Ton} {Tp} {num_cyc})
SYMBOL voltage 1408 656 M0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=.5
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 {Tdelay1} 1n 1n {Ton} {Tp} {num_cyc})
TEXT 1480 -264 Left 2 !.inc mosfet_models.txt
TEXT 1480 -232 Left 2 !.tran 1ms
TEXT 1480 -200 Left 2 ;Gate drive circuit for half-bridge low-side FETs
TEXT 1480 -136 Left 2 !.ic V(Cap1)={Vbat_on} V(Cap2)={Vbat_on}
TEXT 1480 -168 Left 2 !.param Rpd=5k Vbat_on=7 Cboot=1u Tp=.2m Ton=0.5*Tp Tdelay1=Tp Tdelay2=Tp+Ton num_cyc=2
